{% extends "base.html" %}

{% block title %}
    Careenium
{% endblock %}

{% block head %} 
    {% if development %}
        <base href="http:127.0.0.1:5000" /> 
    {% else %}
        <base href="https:real-url-will-eventually-go-here.com" /> 
    {% endif %}
{% endblock %}

{% block content %}

<script type="text/javascript">
    
    function Position (x, y) {
        this.x = x;
        this.y = y;
    };

    function Vector (pos, magnitude) {
        this.pos = pos; // use a Position object
        this.magnitude = magnitude;
    }

    function Simm (radius, mass, pos, velocity) {
        this.radius = radius;
        this.mass = mass;
        this.pos = pos;
        this.velocity = velocity;
    };

    // helper function to draw circles on canvas
    function draw_objects_on_canvas(context, canvas, objects) {

        //erase canvas
        context.clearRect(0, 0, canvas.width, canvas.height);

        for (var i=0; i<objects.length; i++) {
            context.fillStyle = "#000000";
            context.beginPath();
            context.arc(objects[i].pos.x, objects[i].pos.y, 50, 0, 2*Math.PI);
            context.fill();
        };

    };

    $(document).ready(function() { 

        canvas = $('#game-canvas').get(0);
        ctx = canvas.getContext("2d");

        SIMMS = []; // global array to hold simm objects as they are created

        function getMousePos(canvas, evt) {
            var rect = canvas.getBoundingClientRect();
            return {
              x: evt.clientX - rect.left,
              y: evt.clientY - rect.top
            };
          };

        // display mouse position in HTML on mousemove
        canvas.addEventListener('mousemove', function(evt) {
            var mousePos = getMousePos(canvas, evt);
            $('#x-coord-display').text(mousePos.x)
            $('#y-coord-display').text(mousePos.y)
        }, false);

        // register mouse click
        canvas.addEventListener('click', function(evt) {
            var mousePos = getMousePos(canvas, evt);
            SIMMS.push(new Simm(1, 1, new Position(mousePos.x, mousePos.y), 0));
            draw_objects_on_canvas(ctx, canvas, SIMMS);
        }, false);

    });

</script>

<div class="canvas-elem">
    <canvas id="game-canvas" width="750" height="450" style="border: 5px solid #000000;">
        Update your browser to support HTML5 Canvas
    </canvas>
</div>

<div class="cursor-display">
    <span>X: <span id="x-coord-display"> none </span></span>
    <span>Y: <span id="y-coord-display"> none </span></span>
<div>

{% endblock %}
